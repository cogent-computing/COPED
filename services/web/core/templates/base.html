{% load static %}
<html lang="en">
<head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/>
    <meta name="description"
          content="CoPED, or the Catalogue of Projects on Energy Data portal aims to unify various information stores and existing portals for energy projects under a single extendible umbrella."/>
    <meta name="author" content="Nandor Verba"/>
    <title>{% block title %}Home {% endblock title %} | COPED</title>
    <!-- Favicon-->
    <link rel="icon" href="{% static 'assets/favicon.ico' %}"/>
    <!-- Font Awesome icons (free version)-->
    <script src="https://use.fontawesome.com/releases/v5.15.3/js/all.js" crossorigin="anonymous"></script>
    <!-- Font Awesome icons 4.3 for Vis.JS-->
    <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">
    <!-- Simple line icons-->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/simple-line-icons/2.5.5/css/simple-line-icons.min.css"
          rel="stylesheet" type="text/css"/>
    <!-- Google fonts-->
    <link href="https://fonts.googleapis.com/css?family=Lato:300,400,700,300italic,400italic,700italic" rel="stylesheet"
          type="text/css"/>
    <!-- Stepper -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bs-stepper/dist/css/bs-stepper.min.css">
    <!-- Core theme CSS (includes Bootstrap)-->
    <!-- Core theme JS-->

    <!-- Toggle Script to auto load sing in -->
    <link rel="stylesheet" href="{% static 'css/styles.css' %}">
    <link rel="stylesheet" href="{% static 'css/custom.css' %}">
    <link rel="stylesheet" href="{% static 'css/messaging.css' %}">
    <!-- Vis Js Local -->
    <script type="text/javascript" src="{% static 'vis/dist/vis.js' %}"></script>
    <link href="{% static 'vis/dist/vis-network.min.css' %}" rel="stylesheet" type="text/css" />

    <script src="https://code.jquery.com/jquery-3.5.1.js"></script>
    <!-- Bootstrap core JS-->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.bundle.min.js"></script>
    <!-- Popper JS -->
    <script src='https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js'></script>
    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet"
          href="https://cdn.jsdelivr.net/npm/bootstrap-select@1.13.14/dist/css/bootstrap-select.min.css">
    <!-- LeafletJS -->
    <script src="http://cdn.leafletjs.com/leaflet/v0.7.7/leaflet.js"></script>
    <link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet/v0.7.7/leaflet.css" />
    <script>

     /* Auto expand text area */
    function expandTextarea(id) {
        document.getElementById(id).addEventListener('keyup', function() {
            this.style.overflow = 'hidden';
            this.style.height = 0;
            this.style.height = (this.scrollHeight+24) + 'px';

        }, false);
        document.getElementById(id).style.overflow = 'hidden';
        document.getElementById(id).style.height = 0;
        document.getElementById(id).style.height = (document.getElementById(id).scrollHeight+24) + 'px';
    }


    </script>

</head>
<body>
    <!-- Navigation-->
    <nav class="navbar  navbar-expand-lg navbar-light bg-light static-top ">
        <div class="container-fluid">
            <a class="navbar-brand" href="/">
                <img src="{% static 'assets/img/icon_long.png' %}" height="30" class="d-inline-block align-top"
                     alt=""></a>
            <button type="button" class="navbar-toggler" data-toggle="collapse" data-target="#navbarCollapse">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarCollapse">
                <div class="navbar-nav" href="/">
                    <div class="d-none d-xl-block">
                        <a class="navbar-brand"> Catalogue of Projects on Energy Data</a>
                    </div>
                </div>
                <div class="navbar-nav ml-auto">
                    <a class="btn nav-item btn-secondary ml-1 {% block nav_proj%}{% endblock %}" href="/projects/">
                        <i class="fas fa-briefcase"></i> Projects</a>
                    <a class="btn nav-item btn-secondary {% block nav_vis%}{% endblock %}" href="/visuals/"> <i
                            class="fas fa-chart-pie"></i> Explore</a>
                    <div class="dropdown  mr-1">
                        <button class="btn btn-secondary dropdown-toggle {% block nav_ppl%}{% endblock %} {% block nav_org%}{% endblock %}"
                                type="button" id="dropdownMenuCommunity"
                                data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"
                                style="max-width:180px; overflow:hidden; text-overflow:ellipsis">
                            <i class="fas fa-user-friends"></i>&nbsp;Community
                        </button>
                        <div class="dropdown-menu" aria-labelledby="dropdownMenuButton2">
                            <a class="dropdown-item" href="/users/"><i
                                    class="fas fa-users"></i>&nbsp;People</a>
                            <a class="dropdown-item" href="/orgs/"><i
                                    class="fas fa-landmark"></i>&nbsp;Organisations</a>
                        </div>
                    </div>
                    {% if user.is_authenticated is True %}
                    <div class="dropdown  mr-1">
                        <button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenuButton2"
                                data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"
                                style="max-width:180px; overflow:hidden; text-overflow:ellipsis">
                            <i class="fas fa-user"></i> Hello {{ user.first_name }}
                        </button>
                        <div class="dropdown-menu" aria-labelledby="dropdownMenuButton2">
                            <p class="dropdown-header"> Signed in as <br> <b>{{ user.first_name }}
                                {{user.last_name}}</b></p>
                            <a class="dropdown-item" href="/user_page/">Your Profile</a>
                            <a class="dropdown-item" href="/messaging/">Messages</a>
                            <a class="dropdown-item" href="/requests/">Requests</a>
                            <a class="dropdown-item" href="/notifications/">Notifications</a>
                            <!--                        <a class="dropdown-item" href="#">Your Projects</a>-->
                            {% if user.is_staff == True %}
                            <hr class="dropdown-divider"/>
                            <p class="dropdown-header"><i class="fas fa-toolbox"></i> <b>Admin</b></p>
                            <!--                            <a class="dropdown-item" href="#">Users</a>-->
                            <!--                            <a class="dropdown-item" href="#">Projects</a>-->
                            <a class="dropdown-item" href="/admin_permissions/">Permissions</a>
                            <a class="dropdown-item" href="/admin_requests/">Requests</a>
                            <a class="dropdown-item" href="/admin_processes/">Processes</a>
                            {% endif %}
                            <hr class="dropdown-divider"/>
                            <a class="dropdown-item" href="{% url 'logout' %}"> Log Out <i
                                    class="fas fa-sign-out-alt"></i> </a>
                        </div>
                    </div>
                    {% else %}
                    <div class=" mr-1">
                        <a class="btn btn-primary" id="signin_button" data-toggle="modal" data-target="#loginModal" href="#!">Sign in</a>
                        <a class="btn btn-outline-primary" data-toggle="modal" data-target="#signupModal" href="#!">Sign
                            up</a>
                    </div>
                    {% endif %}
                </div>
            </div>
        </div>
    </nav>
    <!-- Login Modal -->
    <div class="modal fade" id="loginModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
         aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">

                <div class="modal-body">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">Ã—</span>
                    </button>
                    <div class="text-center">
                        <img class="img-responsive" style="width:7vw" src="{% static 'assets/img/icon.png' %}"/>
                    </div>

                    <div class="form-title text-center">
                        <h4>Sign into CoPED</h4>
                    </div>
                    <div class="d-flex flex-column text-center">
                        <form action="/login/" method="post" id="form_sing_in" class="needs-validation" novalidate>
                            {% csrf_token %}
                            <div class="form-group text-left">
                                <label for="email1" class="text-dark"> Email Address</label>
                                <input type="email" name="email" class="form-control" id="email1"
                                       placeholder="Your email address..." required>
                                <div class="valid-feedback">Looks good!</div>
                                <div class="invalid-feedback"> Please provide a valid email address.</div>
                            </div>
                            <div class="form-group text-left">
                                <div class="row">
                                    <label for="password1" class="text-dark col-md-6 col-sm-6"> Password</label>
                                    <a class="label-link text-right col-md-6 col-sm-6" tabindex="0"
                                       href="/password_reset">Forgot
                                        password?</a>
                                </div>
                                <input type="password" name="password" pattern="(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{8,}"
                                       class="form-control" id="password1" placeholder="Your password..." required>
                                <div class="valid-feedback">Looks good!</div>
                                <div class="invalid-feedback"> Please provide a valid password. It must contain at least
                                    one
                                    number and one
                                    uppercase and lowercase letter, and at least 8 or more characters
                                </div>
                            </div>
                            <div class="form-group text-centre">
                                <button type="submit" type="submit" form="form_sing_in" value="Submit"
                                        class="btn btn-info btn-block text-center btn-round">Sign in
                                </button>
                            </div>
                        </form>

                        <div class="modal-footer d-flex justify-content-center">
                            <div class="signup-section">Not a member yet? <a href=""
                                                                             data-toggle="modal"
                                                                             data-target="#signupModal"
                                                                             data-dismiss="modal"
                                                                             class="text-info"> Sign Up</a>.
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Signup Modal -->
    <div class="modal fade" id="signupModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel2"
         aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">

                <div class="modal-body">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">Ã—</span>
                    </button>
                    <div class="text-center">
                        <img class="img-responsive" style="width:7vw" src="{% static 'assets/img/icon.png' %}"/>
                    </div>

                    <div class="form-title text-center">
                        <h4>Join CoPED</h4>
                        <h2>Create your Account</h2>
                    </div>
                    <div class="d-flex flex-column text-center">
                        <form class="needs-validation" id="form_signup" action="/register/" method="post" novalidate>
                            {% csrf_token %}

                            <div class="form-group text-left">
                                <label for="first_name" class="text-dark"> First Name</label>
                                <input type="text" class="form-control" id="first_name" name="first_name"
                                       placeholder="Your first name..."
                                       pattern="^[\w'\-,.][^0-9_!Â¡?Ã·?Â¿/\\+=@#$%Ë†&*(){}|~<>;:[\]]{2,}$" required>
                                <div class="valid-feedback">Looks good!</div>
                                <div class="invalid-feedback"> Please provide a valid first name</div>
                            </div>
                            <div class="form-group text-left">
                                <label for="last_name" class="text-dark"> Last Name</label>
                                <input type="text" class="form-control" id="last_name" name="last_name"
                                       placeholder="Your last nme..."
                                       pattern="^[\w'\-,.][^0-9_!Â¡?Ã·?Â¿/\\+=@#$%Ë†&*(){}|~<>;:[\]]{2,}$" required>
                                <div class="valid-feedback">Looks good!</div>
                                <div class="invalid-feedback"> Please provide a valid last name</div>
                            </div>
                            <div class="form-group text-left">
                                <label for="reg_email" class="text-dark"> Email Address</label>
                                <input type="email" class="form-control" id="reg_email" name="email"
                                       placeholder="Your email address..." required>
                                <div class="valid-feedback">Looks good!</div>
                                <div class="invalid-feedback"> Please provide a valid email address.</div>
                            </div>
                            <div class="form-group text-left">
                                <div class="row">
                                    <label for="reg_password" class="text-dark col-md-6 col-sm-6"> Password</label>
                                </div>
                                <input type="password" class="form-control" id="reg_password" name="password"
                                       pattern="(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{8,}"
                                       placeholder="Your password..." required>
                                <div class="valid-feedback">Looks good!</div>
                                <div class="invalid-feedback"> Please provide a valid password. It must contain at least
                                    one
                                    number and one uppercase and lowercase letter, and at least 8 or more characters
                                </div>
                            </div>
                            <div class="form-group text-left">
                                <label for="reg_password_conf" class="text-dark">Confirm Password</label>
                                <input type="password" class="form-control" id="reg_password_conf"
                                       placeholder="Confirm your password..." oninput="check(this)" required>
                                <div class="valid-feedback">Looks good!</div>
                                <div class="invalid-feedback"> Password must match!</div>
                            </div>
                            <button type="submit" type="submit" form="form_signup" value="Submit"
                                    class="btn btn-info btn-block text-center btn-round">Create User
                            </button>
                        </form>

                        <div class="modal-footer d-flexs">
                            <div class="signup-section text-justify">By creating an account, you agree to the
                                <a href="{% static 'assets/docs/terms-of-service.pdf' %}" class="text-info"> Terms of Service</a>.
                                For more information about CoPED's privacy practices,
                                see the
                                <a href="{% static 'assets/docs/CoPED_Website_Privacy_Notice.pdf' %}" class="text-info">
                                    CoPED Privacy Statement</a>. We'll
                                occasionally send you
                                updates and account-relevant emails.
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
<article>
    {% if messages %}
    {% for message in messages %}
    {% if message.tags == "success" or message.tags == "info" %}
    <div class="alert alert-success alert-dismissible fade show" role="alert" id="alert-div">
        <strong style="text-transform: uppercase; ">{{ message.tags }}</strong> - {{ message }}
        <button type="button" class="close" data-dismiss="alert" aria-label="Close">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>
    {% else %}
    <div class="alert alert-warning alert-dismissible fade show" role="alert" id="alert-div2">
        <strong style="text-transform: uppercase; ">{{ message.tags }}</strong> - {{ message }}
        <button type="button" class="close" data-dismiss="alert" aria-label="Close">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>
    {% endif %}
    {% endfor %}
    {% endif %}


    {% block content %}

    {% endblock content %}
</article>
<!-- Footer-->
<footer class="footer bg-light">
    <div class="container-fluid bg-light">
        <div class="row">
            <div class="col-lg-6 h-100 text-center text-lg-left my-auto">
                <ul class="list-inline mb-2">
                    <li class="list-inline-item"><a href="/about/">About</a></li>
                    <li class="list-inline-item">â‹…</li>
                    <li class="list-inline-item"><a href="/contact/">Contact</a></li>
                    <li class="list-inline-item">â‹…</li>
                    <!--                    <li class="list-inline-item"><a href="#!">Terms of Use</a></li>-->
                    <!--                    <li class="list-inline-item">â‹…</li>-->
                    <li class="list-inline-item"><a target="_blank"
                                                    href="{% static 'assets/docs/CoPED_Website_Privacy_Notice.pdf' %}">Privacy
                        Policy</a></li>
                    <li class="list-inline-item"><a target="_blank"
                                                    href="{% static 'assets/docs/terms-of-service.pdf' %}">Terms
                        of Service</a></li>
                </ul>
                <p class="text-muted small mb-4 mb-lg-0">Â© CoPED - Catalogue of Projects on Energy Data 2021. All Rights
                    Reserved.</p>
            </div>
            <div class="col-lg-6 h-100 text-center text-lg-right my-auto">
                <ul class="list-inline mb-0">
                    <li class="list-inline-item mr-3 text-center">
                        <a href="https://www.energyrev.org.uk/" target="_blank">
                            <img src="{% static 'assets/img/logo-erev.png' %}" href="#!"
                                 height="45" class="d-inline-block align-top" alt="EnergyREV"> </a>
                        </br> </li>
                    <li class="list-inline-item mr-3 text-center">
                        <a href="https://es.catapult.org.uk/" target="_blank">
                            <img src="{% static 'assets/img/logo-catap.png' %}" href="#!"
                                 height="45" class="d-inline-block align-top" alt="Energy Systems Catapult"> </a>
                        </br></li>
                    <li class="list-inline-item mr-3 text-center mb-5">
                        <a href="https://www.gov.uk/government/organisations/department-for-business-energy-and-industrial-strategy"
                           target="_blank">
                            <img src="{% static 'assets/img/logo-beis.png' %}" href="#!"
                                 height="45" class="d-inline-block align-top" alt="BEIS UK"> </a>
                        </br> </li>

                    <!--                    <li class="list-inline-item mr-3">-->
                    <!--                        <a href="#!"><i class="fab fa-facebook fa-2x fa-fw"></i></a>-->
                    <!--                    </li>-->
                    <!--                    <li class="list-inline-item mr-3">-->
                    <!--                        <a href="#!"><i class="fab fa-twitter-square fa-2x fa-fw"></i></a>-->
                    <!--                    </li>-->
                    <!--                    <li class="list-inline-item">-->
                    <!--                        <a href="#!"><i class="fab fa-instagram fa-2x fa-fw"></i></a>-->
                    <!--                    </li>-->
                </ul>
            </div>
        </div>
    </div>
</footer>
<!--
<script>
$(document).ready(function() {
$('#loginModal').modal('show');
  $(function () {
    $('[data-toggle="tooltip"]').tooltip()
  })
});
</script>
-->

<script>

// Example starter JavaScript for disabling form submissions if there are invalid fields
(function () {
  'use strict'

  // Fetch all the forms we want to apply custom Bootstrap validation styles to
  var forms = document.querySelectorAll('.needs-validation')

  // Loop over them and prevent submission
  Array.prototype.slice.call(forms)
    .forEach(function (form) {
      form.addEventListener('submit', function (event) {
        if (!form.checkValidity()) {
          event.preventDefault()
          event.stopPropagation()
        }

        form.classList.add('was-validated')
      }, false)
    })
})()


function check(input) {
    if (input.value != document.getElementById('reg_password').value) {
        input.setCustomValidity('Password Must be Matching.');
    } else {
        input.setCustomValidity('');
    }
}

$(document).ready(function() {
    $("#alert-div").fadeTo(3000, 500).slideUp(500, function(){
        $("#alert-div").slideUp(500);
    });
     $("#alert-div2").fadeTo(3000, 500).slideUp(500, function(){
        $("#alert-div2").slideUp(500);
    });
});

</script>
<script src="https://cdn.jsdelivr.net/npm/bs-stepper@1.7.0/dist/js/bs-stepper.min.js"></script>
<!-- Latest compiled and minified JavaScript -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap-select@1.13.14/dist/js/bootstrap-select.min.js"></script>
<script src="{% static 'js/scripts.js' %}"></script>
</body>
</html>